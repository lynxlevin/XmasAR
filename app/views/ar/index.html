<!doctype html>
<html>

<head>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script src="https://raw.githack.com/AR-js-org/studio-backend/master/src/modules/marker/tools/gesture-detector.js"></script>
    <script src="https://raw.githack.com/AR-js-org/studio-backend/master/src/modules/marker/tools/gesture-handler.js"></script>
</head>

<body style="margin: 0; overflow: hidden;">
    <a-scene vr-mode-ui="enabled: false;" loading-screen="enabled: false;" renderer="logarithmicDepthBuffer: true;"
        arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;" id="scene" embedded gesture-detector>
        <a-assets>
            <a-asset-item id="animated-asset1" src="assets/mystery1.glb"></a-asset-item>
            <a-asset-item id="animated-asset2" src="assets/mystery2.glb"></a-asset-item>
            <a-asset-item id="animated-asset3" src="assets/mystery3.glb"></a-asset-item>
            <!-- <a-asset-item
                    id="animated-asset4"
                    src="assets/2-4.glb"
                ></a-asset-item> -->
        </a-assets>

        <a-marker id="animated-marker1" type="pattern" preset="custom" url="assets/pattern-1.patt"
            raycaster="objects: .clickable" emitevents="true" cursor="fuse: false; rayOrigin: mouse;" id="markerA">
            <a-entity id="bowser-model1" scale="1.0643347211899357 1.0643347211899357 1.0643347211899357"
                rotation="270 0 0" animation-mixer="loop: repeat" gltf-model="#animated-asset1" class="clickable"
                gesture-handler></a-entity>
        </a-marker>

        <a-marker id="animated-marker2" type="pattern" preset="custom" url="assets/pattern-2.patt"
            raycaster="objects: .clickable" emitevents="true" cursor="fuse: false; rayOrigin: mouse;" id="markerA">
            <a-entity id="bowser-model2" scale="1.0643347211899357 1.0643347211899357 1.0643347211899357"
                rotation="270 0 0" animation-mixer="loop: repeat" gltf-model="#animated-asset2" class="clickable"
                gesture-handler></a-entity>
        </a-marker>

        <a-marker id="animated-marker3" type="pattern" preset="custom" url="assets/pattern-3.patt"
            raycaster="objects: .clickable" emitevents="true" cursor="fuse: false; rayOrigin: mouse;" id="markerA">
            <a-entity id="bowser-model3" scale="1.0643347211899357 1.0643347211899357 1.0643347211899357"
                rotation="270 0 0" animation-mixer="loop: repeat" gltf-model="#animated-asset3" class="clickable"
                gesture-handler></a-entity>
        </a-marker>

        <!-- <a-marker
                id="animated-marker4"
                type="pattern"
                preset="custom"
                url="assets/pattern-4.patt"
                raycaster="objects: .clickable"
                emitevents="true"
                cursor="fuse: false; rayOrigin: mouse;"
                id="markerA"
            >
                <a-entity
                    id="bowser-model4"
                    scale="1.0643347211899357 1.0643347211899357 1.0643347211899357"
                    rotation="270 0 0"
                    animation-mixer="loop: repeat"
                    gltf-model="#animated-asset4"
                    class="clickable"
                    gesture-handler
                ></a-entity>
            </a-marker> -->
        <a-entity camera></a-entity>
    </a-scene>
    <div class="modal-back" id="modal-back">
        <div class="modal-body">
            <div class="modal-close" id="modal-close">
                ✖️
            </div>
            <div class="modal-text">
                ムーミンの命は預かった。<br>
                ムーミンが本当に大切なら<br>
                ３０分以内に見つけ出してやることだな<br>
                <br>
                さあ、ゲームのスタートだ。<br>
                最初のヒントは<br>
                この部屋に隠した。
            </div>
        </div>
    </div>
</body>

<script>
    const closeModal = () => { document.getElementById('modal-back').classList.add("modal-back--invisible") };
    document.getElementById("modal-back").addEventListener("click", closeModal);
    document.getElementById("modal-close").addEventListener("click", closeModal);
</script>

</html>